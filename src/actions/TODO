refactor history and changing url process
